<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chicken Run - 3D –ò–≥—Ä–∞</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: linear-gradient(to bottom, #87CEEB, #98FB98);
            font-family: Arial, sans-serif;
        }
        
        #gameContainer {
            position: relative;
            width: 100vw;
            height: 100vh;
        }
        
        #mainMenu {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            z-index: 300;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            font-family: 'Arial', sans-serif;
            overflow-y: auto;
            padding: 20px;
            box-sizing: border-box;
        }
        
        #mainMenu h1 {
            font-size: clamp(2em, 8vw, 4em);
            margin: 0;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
            animation: bounce 2s infinite;
            text-align: center;
        }
        
        #mainMenu .subtitle {
            font-size: clamp(0.9em, 3vw, 1.2em);
            margin: 10px 0 20px 0;
            opacity: 0.9;
            text-align: center;
            max-width: 90%;
        }
        
        .menu-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 15px 0;
            width: 100%;
            max-width: 300px;
        }
        
        .menu-button {
            background: linear-gradient(45deg, #ff6b35, #ff8c42);
            color: white;
            border: none;
            padding: 12px 20px;
            font-size: clamp(14px, 4vw, 18px);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            width: 100%;
        }
        
        .menu-button:hover {
            background: linear-gradient(45deg, #ff8c42, #ffb366);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        .menu-button:active {
            transform: translateY(0);
        }
        
        .game-info {
            margin-top: 20px;
            text-align: center;
            opacity: 0.8;
            max-width: 90%;
            width: 100%;
            max-width: 600px;
        }
        
        .game-info p {
            font-size: clamp(12px, 3vw, 16px);
            margin: 10px 0;
        }
        
        .controls-info {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }
        
        .controls-info h3 {
            margin-top: 0;
            color: #ffd700;
            font-size: clamp(14px, 3.5vw, 18px);
        }
        
        .controls-info p {
            font-size: clamp(11px, 2.5vw, 14px);
            line-height: 1.4;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
        @media (max-height: 700px) {
            #mainMenu h1 {
                font-size: clamp(1.5em, 6vw, 2.5em);
            }
            
            .menu-buttons {
                gap: 8px;
                margin: 10px 0;
            }
            
            .menu-button {
                padding: 10px 15px;
            }
            
            .game-info {
                margin-top: 15px;
            }
            
            .controls-info {
                padding: 10px;
                margin-top: 10px;
            }
        }
        
        @media (max-width: 480px) {
            #mainMenu {
                padding: 15px;
            }
            
            .game-info p {
                font-size: 14px;
            }
            
            .controls-info p {
                font-size: 12px;
            }
        }
        
        .hidden {
            display: none !important;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö –æ–∫–æ–Ω */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 400;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
        }
        
        .popup-content {
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        .popup-content h2 {
            margin-top: 0;
            font-size: clamp(18px, 4vw, 24px);
        }
        
        .popup-content h3 {
            color: #ffd700;
            font-size: clamp(16px, 3.5vw, 20px);
        }
        
        .popup-content p, .popup-content li {
            font-size: clamp(12px, 3vw, 16px);
            line-height: 1.5;
        }
        
        .popup-content .text-left {
            text-align: left;
        }
        
        @media (max-width: 600px) {
            .popup-content {
                padding: 20px;
                max-width: 95%;
            }
        }
        
        #ui {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 100;
            color: white;
            font-size: clamp(16px, 4vw, 24px);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        #gameOver {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 200;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            display: none;
        }
        
        #controls {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            font-size: clamp(12px, 3vw, 16px);
        }
        
        @media (max-width: 480px) {
            #ui {
                top: 15px;
                left: 15px;
            }
            
            #gameOver {
                padding: 20px;
            }
            
            #controls {
                bottom: 15px;
                left: 15px;
            }
        }
        
        /* –ü—Ä–æ—Å—Ç—ã–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ */
        button:not(.menu-button) {
            background: #ff6b35;
            color: white;
            border: none;
            padding: 5px 15px;
            font-size: 14px;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 10px;
        }
        
        button:not(.menu-button):hover {
            background: #ff8c42;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –º–∞–≥–∞–∑–∏–Ω–∞ */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        .modal-header h2 {
            margin: 0;
            color: #333;
            font-size: 24px;
        }

        .close-button {
            font-size: 28px;
            cursor: pointer;
            color: #666;
            transition: color 0.3s;
        }

        .close-button:hover {
            color: #ff6b35;
        }

        .modal-body {
            padding: 20px;
        }

        .corn-display {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(45deg, #ffeb3b, #ffc107);
            border-radius: 10px;
            color: #333;
        }

        .corn-display h3 {
            margin: 0;
            font-size: 18px;
        }

        .shop-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .shop-item {
            background: #f9f9f9;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .shop-item:hover {
            border-color: #ff6b35;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .hat-preview {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .hat-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }

        .hat-price {
            color: #ff6b35;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .buy-button {
            background: linear-gradient(45deg, #4caf50, #66bb6a);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .buy-button:hover {
            background: linear-gradient(45deg, #66bb6a, #81c784);
            transform: scale(1.05);
        }

        .buy-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .shop-item.owned .buy-button {
            background: linear-gradient(45deg, #2196f3, #42a5f5);
        }

        .shop-item.owned .buy-button:hover {
            background: linear-gradient(45deg, #42a5f5, #64b5f6);
        }

        .shop-item.selected {
            border-color: #ff6b35;
            background: linear-gradient(45deg, #fff3e0, #ffcc02);
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
        <div id="mainMenu">
            <h1>üêî CHICKEN RUN üêî</h1>
            <div class="subtitle">–ë–µ–≥–∏, –∫—É—Ä–∏—Ü–∞, –±–µ–≥–∏! –ò–∑–±–µ–≥–∞–π –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –∏ —Å–æ–±–∏—Ä–∞–π –∑–µ—Ä–Ω–æ!</div>
            
            <div class="menu-buttons">
                <button class="menu-button" onclick="startGame()">üöÄ –°–¢–ê–†–¢</button>
                <button class="menu-button" onclick="showShop()">üõí –ú–∞–≥–∞–∑–∏–Ω</button>
                <button class="menu-button" onclick="showInstructions()">üéÆ –ö–∞–∫ –∏–≥—Ä–∞—Ç—å</button>
                <button class="menu-button" onclick="showHighScores()">üèÜ –†–µ–∫–æ—Ä–¥—ã</button>
                <button class="menu-button" onclick="showSettings()">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            </div>
            
            <div class="game-info">
                <p>3D-–±–µ–≥–æ–≤–∞—è –∏–≥—Ä–∞ –≤ —Å—Ç–∏–ª–µ Subway Surfers —Å –∫—É—Ä–∏—Ü–µ–π –≤ –≥–ª–∞–≤–Ω–æ–π —Ä–æ–ª–∏!</p>
                <div class="controls-info">
                    <h3>üéØ –¶–µ–ª—å –∏–≥—Ä—ã:</h3>
                    <p>‚Ä¢ –ò–∑–±–µ–≥–∞–π—Ç–µ –º–∞—à–∏–Ω—ã, –∞–≤—Ç–æ–±—É—Å—ã –∏ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è<br>
                       ‚Ä¢ –°–æ–±–∏—Ä–∞–π—Ç–µ –∑–µ—Ä–Ω–æ –∫—É–∫—É—Ä—É–∑—ã<br>
                       ‚Ä¢ –ü—Ä—ã–≥–∞–π—Ç–µ –Ω–∞ –∞–≤—Ç–æ–±—É—Å—ã –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–Ω–¥—É—Å—ã<br>
                       ‚Ä¢ –ü—Ä–æ–¥–µ—Ä–∂–∏—Ç–µ—Å—å –∫–∞–∫ –º–æ–∂–Ω–æ –¥–æ–ª—å—à–µ!</p>
                </div>
            </div>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π -->
        <div id="instructionsScreen" class="hidden popup-overlay">
            <div class="popup-content">
                <h2>üéÆ –ö–∞–∫ –∏–≥—Ä–∞—Ç—å</h2>
                <div class="text-left" style="margin: 20px 0;">
                    <h3>üïπÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</h3>
                    <p><strong>A / ‚Üê</strong> - –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ª–µ–≤–æ<br>
                    <strong>D / ‚Üí</strong> - –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø—Ä–∞–≤–æ<br>
                    <strong>–ü—Ä–æ–±–µ–ª</strong> - –ø—Ä—ã–∂–æ–∫</p>
                    
                    <h3>üéØ –ü—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è:</h3>
                    <p><strong>üöó –ú–∞—à–∏–Ω—ã</strong> - –º–æ–∂–Ω–æ –ø–µ—Ä–µ–ø—Ä—ã–≥–Ω—É—Ç—å<br>
                    <strong>üöå –ê–≤—Ç–æ–±—É—Å—ã</strong> - –º–æ–∂–Ω–æ –∑–∞–ø—Ä—ã–≥–Ω—É—Ç—å –Ω–∞ –∫—Ä—ã—à—É<br>
                    <strong>üöß –û–≥—Ä–∞–∂–¥–µ–Ω–∏—è</strong> - –Ω—É–∂–Ω–æ –æ–±—ä–µ—Ö–∞—Ç—å<br>
                    <strong>üöåüí• –°–ª–æ–º–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–±—É—Å—ã</strong> - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–∫ –ø–∞–Ω–¥—É—Å!</p>
                    
                    <h3>üí∞ –ë–æ–Ω—É—Å—ã:</h3>
                    <p><strong>üåΩ –ó–µ—Ä–Ω–æ –∫—É–∫—É—Ä—É–∑—ã</strong> - —Å–æ–±–∏—Ä–∞–π—Ç–µ –∑–µ—Ä–Ω–æ –¥–ª—è –ø–æ–∫—É–ø–æ–∫<br>
                    <strong>‚è∞ –í—Ä–µ–º—è</strong> - +1 –æ—á–∫–æ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É</p>
                </div>
                <button class="menu-button" onclick="backToMainMenu()">üîô –ù–∞–∑–∞–¥</button>
            </div>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∫–æ—Ä–¥–æ–≤ -->
        <div id="highScoresScreen" class="hidden">
            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
                        background: rgba(0,0,0,0.9); color: white; padding: 40px; border-radius: 15px; 
                        text-align: center; max-width: 500px; z-index: 400;">
                <h2>üèÜ –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∫–æ—Ä–¥–æ–≤</h2>
                <div id="scoresTable" style="margin: 20px 0; text-align: left;">
                    <p>–†–µ–∫–æ—Ä–¥—ã –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≤ –±—É–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö!</p>
                </div>
                <button class="menu-button" onclick="backToMainMenu()">üîô –ù–∞–∑–∞–¥</button>
            </div>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
        <div id="settingsScreen" class="hidden">
            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
                        background: rgba(0,0,0,0.9); color: white; padding: 40px; border-radius: 15px; 
                        text-align: center; max-width: 500px; z-index: 400;">
                <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                <div style="text-align: left; margin: 20px 0;">
                    <p><strong>üé® –ö–∞—á–µ—Å—Ç–≤–æ –≥—Ä–∞—Ñ–∏–∫–∏:</strong> <button onclick="toggleQuality()" id="qualityButton">–í—ã—Å–æ–∫–æ–µ</button></p>
                    <p style="font-size: 12px; opacity: 0.7; margin-left: 20px;">
                        –í—ã—Å–æ–∫–æ–µ ‚Üí –°—Ä–µ–¥–Ω–µ–µ ‚Üí –ù–∏–∑–∫–æ–µ ‚Üí –£–ª—å—Ç—Ä–∞-–Ω–∏–∑–∫–æ–µ
                    </p>
                </div>
                <button class="menu-button" onclick="backToMainMenu()">üîô –ù–∞–∑–∞–¥</button>
            </div>
        </div>
        
        <div id="ui">
            <div>–°—á–µ—Ç: <span id="score">0</span></div>
            <div>–ó–µ—Ä–Ω–æ: <span id="corn">0</span></div>
        </div>
        
        <div id="startScreen" class="hidden">
            <h1>üêî Chicken Run üêî</h1>
            <p>–ü–æ–º–æ–≥–∏—Ç–µ –∫—É—Ä–∏—Ü–µ –∏–∑–±–µ–∂–∞—Ç—å –º–∞—à–∏–Ω –∏ —Å–æ–±—Ä–∞—Ç—å –∑–µ—Ä–Ω–æ –∫—É–∫—É—Ä—É–∑—ã!</p>
            <button onclick="startGame()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
            <div style="margin-top: 20px; font-size: 14px;">
                <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</p>
                <p>A/D –∏–ª–∏ ‚Üê/‚Üí - –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ</p>
                <p>–ü—Ä–æ–±–µ–ª - –ø—Ä—ã–∂–æ–∫</p>
            </div>
        </div>
        
        <div id="gameOver">
            <h2>–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!</h2>
            <p>–§–∏–Ω–∞–ª—å–Ω—ã–π —Å—á–µ—Ç: <span id="finalScore">0</span></p>
            <p>–°–æ–±—Ä–∞–Ω–æ –∑–µ—Ä–Ω–∞: <span id="finalCorn">0</span></p>
            <div style="margin-top: 20px;">
                <button class="menu-button" onclick="restartGame()" style="margin: 10px;">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
                <button class="menu-button" onclick="backToMainMenu()" style="margin: 10px;">–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</button>
            </div>
        </div>
        
        <div id="controls">
            <div>A/D - –≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ | –ü—Ä–æ–±–µ–ª - –ø—Ä—ã–∂–æ–∫</div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –º–∞–≥–∞–∑–∏–Ω–∞ -->
    <div id="shopModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üõí –ú–∞–≥–∞–∑–∏–Ω</h2>
                <span class="close-button" onclick="closeShop()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="corn-display">
                    <h3>üåΩ –í–∞—à–µ –∑–µ—Ä–Ω–æ: <span id="shopCornCount">0</span></h3>
                </div>
                <div class="shop-items">
                    <div class="shop-item" data-hat="none">
                        <div class="hat-preview">üêî</div>
                        <div class="hat-name">–ë–µ–∑ —à–ª—è–ø—ã</div>
                        <div class="hat-price">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</div>
                        <button class="buy-button" onclick="buyHat('none')">–í—ã–±—Ä–∞—Ç—å</button>
                    </div>
                    <div class="shop-item" data-hat="cowboy">
                        <div class="hat-preview">ü§†</div>
                        <div class="hat-name">–ö–æ–≤–±–æ–π—Å–∫–∞—è —à–ª—è–ø–∞</div>
                        <div class="hat-price">50 üåΩ</div>
                        <button class="buy-button" onclick="buyHat('cowboy')">–ö—É–ø–∏—Ç—å</button>
                    </div>
                    <div class="shop-item" data-hat="crown">
                        <div class="hat-preview">üëë</div>
                        <div class="hat-name">–ö–æ—Ä–æ–Ω–∞</div>
                        <div class="hat-price">100 üåΩ</div>
                        <button class="buy-button" onclick="buyHat('crown')">–ö—É–ø–∏—Ç—å</button>
                    </div>
                    <div class="shop-item" data-hat="pirate">
                        <div class="hat-preview">üßô‚Äç‚ôÇÔ∏è</div>
                        <div class="hat-name">–í–æ–ª—à–µ–±–Ω–∞—è —à–ª—è–ø–∞</div>
                        <div class="hat-price">75 üåΩ</div>
                        <button class="buy-button" onclick="buyHat('pirate')">–ö—É–ø–∏—Ç—å</button>
                    </div>
                    <div class="shop-item" data-hat="party">
                        <div class="hat-preview">üéâ</div>
                        <div class="hat-name">–í–µ—á–µ—Ä–∏–Ω–∫–∞</div>
                        <div class="hat-price">150 üåΩ</div>
                        <button class="buy-button" onclick="buyHat('party')">–ö—É–ø–∏—Ç—å</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="game.js"></script>
</body>
</html>